// *****
// * Original code by Hanebu
// *****
//
// HOW TO USE IT:
//
// 1. Set up the list:
//    Close all UO clients.
//    Navigate to Outlands folder.
//    Usually C:\Outlands Ultima Online\ClassicUO\Data\Plugins\Assistant\Profiles
//    Find profile of your Razor in here, usually "default.xml"
//    Make a backup of this file in case somethign goes wrong.
//    Open the file with notepad, notepad++ or similar.
//    Locate <Restock-1 hotbag="0" />
//    Replace the whole line with the the text of "default.xml" in this GitHub folder.
//    Save the file.
//
// 2. Declare variables:
//    Open UO client.
//    Go to Razor --> Scripts --> Options.
//    Press Add and target any item ingame.
//    Now type "TMapChest" in the dialog box.
//    Remember: Case sensitive and without " ".
// 

setvar 'TMapChest'

// Hide
if not hidden 
    hotkey 'Hiding'
    wait 500
endif

// Remove Trap
while not insysmsg 'devoid of traps' and not insysmsg 'cleared it of traps'
    dclicktype 29001 backpack
    waitfortarget
    target 'TMapChest'
    wait 4000
endwhile

// Lockpick
while not insysmsg 'successfully pick the lock' and not insysmsg 'That appears to be unlocked'
    dclicktype 5373 backpack
    waitfortarget
    target 'TMapChest'
    wait 4000
endwhile

// Loot
restock 1
waitfortarget 
target 'TMapChest'

// Wait for looting
while not insysmsg 'Finished'
    pause 300
endwhile

// Hide
if not hidden 
    hotkey 'Hiding'
    wait 500
endif

// Drop Tmap
lifttype '5356'
drop 'TMapChest' 29 34 0
